<!DOCTYPE html>
<html>
<head>
  <title>Datajam</title>
  <%= stylesheet_link_tag :all %>
  <%= csrf_meta_tag %>

  <%= yield :head %>
  <style>
    body { padding-top: 60px; }
    @media (max-width:979px) {
      body { padding-top:0; }

    }
    .nav-list i { color: #333; }
    footer { border-top: 1px solid #ccc; margin-top: 20px; padding-top: 20px; }
    td form { margin:0; }
    .ace-editor {
      position: relative !important;
      background: #fff;
      min-width: 400px;
      max-width: 80%;
      height: 400px;
      border: 1px solid #999;
      -moz-border-radius: 4px;
      -webkit-border-radius: 4px;
    }
    .inline-form button,
    .inline-form input { display: none; }
  </style>
</head>
<body>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <%= link_to("Datajam", admin_root_path, class: "brand") %>
        <div class="nav-collapse">
          <ul class="nav">
            <li><a href="/">Live Site &raquo;</a></li>
          </ul>

          <% if user_signed_in? %>
          <ul class="nav pull-right">
            <li><a href="<%= edit_admin_user_path current_user %>"><i class="icon-user"></i> <%= current_user.name %></a></li>
            <li class="divider-vertical"></li>
            <li><%= link_to("Sign Out", destroy_user_session_path) %></li>
          </ul>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3">
        <ul class="nav nav-list well">
        <% Datajam.navigation.each do |section| %>
          <li class="nav-header"><%= section[:title] %></li>
          <% section[:items].each do |item| %>
          <li>
            <a href="<%= item[:url] %>">
              <i class="icon-<%= item[:icon] %>"></i>
              <%= item[:title] %>
            </a>
          </li>
          <% end %>
        <% end %>
        </ul>
      </div>

      <div class="span9" id="content">
        <%= flash_messages %>
        <%= yield %>

        <%= yield :body %>
      </div>
    </div>
    <div class="row-fluid">
      <footer class="span12">
        <a href="http://www.datajam.org">Datajam.org</a> |
        Built by the <a href="http://sunlightfoundation.com">Sunlight Foundation</a>
      </footer>
    </div>
  </div>

  <%= javascript_include_tag :defaults %>
  <script type="text/javascript">
    window.curl || (curl = {
      baseUrl: '/javascripts',
      pluginPath: '/javascripts/curl/plugin',
      paths: {}
    })
  </script>
  <script type="text/javascript">
    // don't allow curl.js to pollute the global namespace; ACE has its own require...
    window._define = window.define;
  </script>
  <script src="/javascripts/curl/curl.js" type="text/javascript"></script>
  <script type="text/javascript">
    window.define = window._define;
  </script>
  <%# Cloud 9's require.js implementation doesn't play nice with others,
      put this last, just in case somebody needs the global require/define
      (though they should be using curl's instead). %>
  <script src="/javascripts/ace.js" type="text/javascript" charset="utf-8"></script>
  <script src="/javascripts/mode-html.js" type="text/javascript" charset="utf-8"></script>
  <%= yield :javascript %>
</body>
</html>
