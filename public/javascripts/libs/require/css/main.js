define(["require","module","./css.api"],function(f,g,b){var a={},h=f.isBrowser;g.config();a.pluginBuilder="./css.pluginBuilder";a.stylesheet=void 0;b.onBufferWrite=function(){h&&a.applyBufferStyle()};a.add=function(){return b.add.apply(b,arguments)};a.clear=function(){return b.clear.apply(b,arguments)};a.addHandler=function(a,d,e){void 0===e&&(e=d);b.add("/*+ "+e+" */\n"+a+"\n/*- "+e+"*/",d)};a.applyBufferStyle=function(){void 0===this.stylesheet&&(this.stylesheet=document.createElement("style"),
this.stylesheet.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(this.stylesheet));this.stylesheet.styleSheet?this.stylesheet.styleSheet.cssText+=b.convertStyleBase(b.buffer,f.toUrl("."),document.baseURI):this.stylesheet.innerHTML+=b.convertStyleBase(b.buffer,f.toUrl("."),document.baseURI)};a.load=function(c,d,e){"!"==c.substr(c.length-1,1)&&(c=c.substr(0,c.length-2));if(">>"==c.substr(0,2))throw"CSS buffer points can only be defined for builds.";d(["text!"+c+".css"],
function(d){a.add(d,c);e(b)})};return a});